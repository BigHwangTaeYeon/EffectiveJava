## 상속보다는 컴포지션을 사용하라

기존 클래스가 새로운 클래스의 구성 요소로 쓰인다는 뜻에서 이러한 설계를 컴포지션(composition 구성)이라 한다.
새 클래스의 인스턴스 메서드들은 기존 클래스의 대응하는 메서드를 호출해 그 결과를 반환한다.
이 방식을 전달(forwarding)이라 하며, 새로운 클래스의 메서드들을 전달 메서드(forwarding method)라 부른다.



상속은 반드시 하위 클래스가 상위 클래스의 진짜 하위 타입인 상황에서만 사용해야 한다.
클래스 B가 클래스 A와 is-a 관계일때만 상속하라.
A를 상속하려는 B라면 정말 B가 A인지 자문하라.

확장하려는 클래스의 API에 아무런 결함이 없는가 ?
결함이 있다면 API까지 전파돼도 괜찮은가 ?

컴포지션으로는 결함을 숨기는 새로운 API를 설계할 수 있지만,
상속은 결함까지 그대로 승계한다.

상속은 강력하지만 캡슐화를 해친다는 문제가 있다.
상위와 하위 클래스가 순수한 is-a 관계일 때만 써야 한다.(그래도 안심할 수는 없다.)
하위 클래스의 패키지가 상위 클래스와 다르고 상위 클래스가 확장을 고려해 설계되지 않았다면 여전히 문제될 수 있다.
상속의 취약점을 피하려면 상속 대신 컴포지션과 전달을 사용하자.
특히 래퍼 클래스로 구현할 적당한 인터페이스가 있다면 더욱 그렇다.
래퍼 클래스는 하위 클래스보다 견고하고 강력하다.